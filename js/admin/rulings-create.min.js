$(document).ready(function(){var t={el:{cardName:$("#card-name-autocomplete"),cardId:$("#card-id"),cardImage:$("#card-image"),form:$("#validate-this-form")},url:{autocomplete:window.BASE_URL+"/api/cards/autocomplete/names",check:window.BASE_URL+"/api/cards/check/"}};t.el.cardName.autocomplete({source:t.url.autocomplete,select:function(e,a){e.preventDefault(),t.el.cardName.val(a.item.label),t.el.cardId.val(a.item.id),t.el.cardImage.html(["<a ",'href="',a.item.image,'" ','data-lightbox="cards" ','data-title="',a.item.label,'"',">",'<span class="fd-zoomable-lg">',"<img ",'src="',a.item.image,'" ','class="img-responsive" ','width="200px"',">","</span>","</a>","<br>","<a ",'href="',a.item.link,'" ','class="btn btn-link"',">",'<i class="fa fa-external-link"></i> ',"Go to card page","</a>"].join(""))},delay:300,minLength:2}),t.el.form.on("submit",function(e){e.preventDefault();var a=t.el.cardId.val();$.getJSON(t.url.check+a,null,function(e){e.response?t.el.form.unbind().submit():FoWDB.notify(e.message,"danger")})}),$('.has-clear input[type="text"]').on("input propertychange",function(){var e=Boolean($(this).val());$(this).siblings(".form-control-clear").toggleClass("hidden",!e)}).trigger("propertychange"),$(".form-control-clear").click(function(){t.el.cardName.val("").focus(),t.el.cardId.val(""),t.el.cardImage.html("Image will be shown here"),$(this).siblings('input[type="text"]').val(""),$(this).toggleClass("hidden")}).trigger("propertychange").focus()});